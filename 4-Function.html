<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="assets/style.css?t=a44c9e9d">
    <link rel="stylesheet" href="http://ricostacruz.com/docpress-rsc/style.css">
    <script src="assets/script.js?t=2bcc4b59"></script>
    <title>第四章：函式</title>
    <meta name="viewport" content="width=device-width">
  </head>
  <body class="-menu-visible">
    <div class="doc-layout">
      <div class="toggle menu-toggle js-menu-toggle"></div>
      <div class="body page-4-function">
        <div class="header-nav">
          <div class="right"><a href="https://github.com/MiniaspReading/JavaScript-The_Good_Parts" data-title="MiniaspReading/JavaScript-The_Good_Parts" class="iconlink">
              <!-- span.title Open in GitHub--><span class="icon -github"></span></a>
          </div>
        </div>
        <div class="markdown-body"><h1 id="">&#x7B2C;&#x56DB;&#x7AE0; &#x51FD;&#x5F0F;</h1>
<p>&#x51FD;&#x5F0F;&#x662F; JavaScript &#x7684;&#x57FA;&#x790E;&#x6A21;&#x7D44;&#x55AE;&#x4F4D;&#x3002;&#x7528;&#x65BC;&#x7A0B;&#x5F0F;&#x78BC;&#x7684;<strong>&#x518D;&#x5229;&#x7528;</strong>&#x3001;<strong>&#x8CC7;&#x8A0A;&#x7684;&#x96B1;&#x85CF;</strong>&#x548C;&#x6574;&#x9AD4;&#x7684;&#x7D50;&#x69CB;&#xFF0C;&#x7A0B;&#x5F0F;&#x8A2D;&#x8A08;&#x7684;&#x7CBE;&#x7FA9;&#xFF0C;&#x5C31;&#x662F;&#x5982;&#x4F55;&#x628A;<strong>&#x4E00;&#x7D44;&#x9700;&#x6C42;</strong>&#x5206;&#x89E3;&#x6210;&#x4E00;&#x7D44;&#x51FD;&#x5F0F;&#x8207;&#x8CC7;&#x6599;&#x7D50;&#x69CB;&#x3002;</p>
<h2 id="4-1">4-1 &#x51FD;&#x5F0F;&#x7269;&#x4EF6;</h2>
<p>JavaScript &#x7684;&#x51FD;&#x5F0F;&#x90FD;&#x662F;&#x7269;&#x4EF6;&#xFF0C;&#x7269;&#x4EF6;&#x662F;&#x8A31;&#x591A;&#x300E;&#x540D;&#x7A31;/&#x503C;&#x300F;&#x7684;&#x96C6;&#x5408;&#xFF0C;&#x8207; prototype &#x7269;&#x4EF6;&#x8207;&#x6709;&#x806F;&#x7E6B;&#x3002;&#x51FD;&#x5F0F;&#x7269;&#x4EF6;&#x5247;&#x6703;&#x806F;&#x7E6B;&#x5230; Function.prototype(&#x672C;&#x8EAB;&#x518D;&#x806F;&#x7E6B;&#x5230; object.prototype)&#x3002;
&#x6BCF;&#x500B;&#x51FD;&#x5F0F;&#x4E5F;&#x6703;&#x5EFA;&#x7ACB;&#x5169;&#x500B;&#x96B1;&#x85CF;&#x7279;&#x6027;&#xFF1A;&#x542B;&#x662F;&#x7684;&#x80CC;&#x666F;&#x60C5;&#x666F;&#x8207;&#x5BE6;&#x4F5C;&#x51FD;&#x5F0F;&#x884C;&#x70BA;&#x7684;&#x7A0B;&#x5F0F;&#x78BC;&#x3002;&#x9019;&#x500B;&#x51FD;&#x5F0F;&#x7269;&#x4EF6;&#x4E5F;&#x4E00;&#x4F75;&#x5EFA;&#x7ACB;&#x4E00;&#x500B; prototype &#x7279;&#x6027;&#xFF0C;&#x9019;&#x500B;&#x7279;&#x6027;&#x7684;&#x503C;&#x5177;&#x6709; contructor &#x7279;&#x6027;&#x7684;&#x7269;&#x4EF6;&#x3002;</p>
<p>&#x51FD;&#x5F0F;&#x80FD;&#x5132;&#x5B58;&#x518D;&#x8B8A;&#x6578;&#x3001;&#x7269;&#x4EF6;&#x6216;&#x9663;&#x5217;&#x88E1;&#x3002;&#x51FD;&#x6578;&#x80FD;&#x88AB;&#x7576;&#x6210;&#x5F15;&#x6578;&#x50B3;&#x7D66;&#x53E6;&#x4E00;&#x500B;&#x51FD;&#x5F0F;&#xFF0C;&#x51FD;&#x5F0F;&#x4E5F;&#x80FD;&#x88AB;&#x53E6;&#x4E00;&#x500B;&#x51FD;&#x5F0F;&#x56DE;&#x50B3;&#xFF0C;&#x51FD;&#x5F0F;&#x65E2;&#x7136;&#x662F;&#x500B;&#x7269;&#x4EF6;&#xFF0C;&#x4ED6;&#x4E5F;&#x53EF;&#x4EE5;&#x6709;&#x81EA;&#x5DF1;&#x7684;&#x65B9;&#x6CD5;&#x3002;</p>
<h2 id="4-2">4-2 &#x51FD;&#x5F0F;&#x5BE6;&#x5B57;</h2>
<p>&#x51FD;&#x5F0F;&#x7269;&#x4EF6;&#x4EE5;&#x51FD;&#x5F0F;&#x5BE6;&#x5B57;&#x5EFA;&#x7ACB;&#xFF1A;</p>
<pre><code class="lang-sh">var add = <span class="pl-k">function</span> (a,b){
    <span class="pl-c1">return</span> a + b;
};
</code></pre>
<p>&#x51FD;&#x5F0F;&#x6709;&#x56DB;&#x500B;&#x90E8;&#x4EFD;&#xFF1A;</p>
<ul>
<li>&#x7B2C;&#x4E00;&#x90E8;&#x4EFD;&#xFF1A;&#x4FDD;&#x7559;&#x5B57; function</li>
<li>&#x7B2C;&#x4E8C;&#x90E8;&#x4EFD;&#xFF1A;&#x53EF;&#x9078;&#x7528;&#x7684;&#x51FD;&#x5F0F;&#x540D;&#x7A31;&#x3002;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x81EA;&#x5DF1;&#x7684;&#x540D;&#x7A31;&#xFF0C;&#x53CD;&#x8986;&#x81EA;&#x6211;&#x547C;&#x53EB;&#x3002;&#x5982;&#x679C;&#x6C92;&#x6709;&#x540D;&#x7A31;&#xFF0C;&#x5247;&#x7A31;&#x70BA;<strong>&#x533F;&#x540D;&#x51FD;&#x5F0F;</strong>&#xFF08;anonymous function&#xFF09;&#x3002;</li>
<li>&#x7B2C;&#x4E09;&#x90E8;&#x4EFD;&#xFF1A;&#x51FD;&#x5F0F;&#x53C3;&#x6578;&#x7684;&#x96C6;&#x5408;&#xFF0C;&#x9700;&#x8981;&#x4EE5;&#x62EC;&#x865F;&#x570D;&#x8D77;&#xFF0C;&#x53EF;&#x4EE5;&#x7531;&#x96F6;&#x5230;&#x591A;&#x500B;&#x540D;&#x7A31;&#x4E26;&#x4EE5;&#x9017;&#x865F;&#x9593;&#x9694;&#xFF0C;&#x53C3;&#x6578;&#x6839;&#x64DA;&#x51FD;&#x5F0F;&#x88AB;&#x547C;&#x53EB;&#x6642;&#x63D0;&#x4F9B;&#x7684;&#x5F15;&#x6578;&#x800C;&#x521D;&#x59CB;&#x5316;&#x3002;</li>
<li>&#x7B2C;&#x56DB;&#x90E8;&#x4EFD;&#xFF1A;&#x4EE5;&#x4E00;&#x7D44;&#x5927;&#x62EC;&#x865F;&#x570D;&#x8D77;&#x7684;&#x6558;&#x8FF0;&#x3002;&#x6558;&#x8FF0;&#x662F;&#x51FD;&#x5F0F;&#x7684;&#x672C;&#x9AD4;&#xFF0C;&#x88AB;&#x547C;&#x53EB;&#x6642;&#x57F7;&#x884C;&#x3002;</li>
</ul>
<p>&#x51FD;&#x5F0F;&#x80FD;&#x88AB;&#x5B9A;&#x7FA9;&#x5728;&#x53E6;&#x4E00;&#x500B;&#x51FD;&#x5F0F;&#x88E1;&#xFF0C;&#x5167;&#x5C64;&#x7684;&#x51FD;&#x5F0F;&#x80FD;&#x53D6;&#x7528;&#x81EA;&#x5DF1;&#x7684;&#x53C3;&#x6578;&#x8207;&#x8B8A;&#x6578;&#xFF0C;&#x4E5F;&#x80FD;&#x4EAB;&#x6709;&#x5916;&#x5C64;&#x51FD;&#x5F0F;&#x7684;&#x53C3;&#x6578;&#x548C;&#x8B8A;&#x6578;&#x3002;&#x9019;&#x500B;&#x5C0D;&#x5916;&#x570D;&#x74B0;&#x5883;&#x7684;&#x806F;&#x7E6B;&#xFF0C;&#x7A31;&#x70BA;<strong>&#x9589;&#x5305;</strong>&#xFF08;closure&#xFF09;&#x3002;</p>
<h2 id="4-3">4-3 &#x547C;&#x53EB;</h2>
<p>&#x547C;&#x53EB;&#x51FD;&#x5F0F;&#xFF0C;&#x5C07;&#x6703;&#x66AB;&#x7DE9;&#x73FE;&#x6709;&#x7684;&#x57F7;&#x884C;&#xFF0C;&#x628A;&#x63A7;&#x5236;&#x6B0A;&#x548C;&#x53C3;&#x6578;&#x50B3;&#x7D66;&#x65B0;&#x547C;&#x53EB;&#x7684;&#x51FD;&#x5F0F;&#x3002;&#x9664;&#x4E86;&#x5DF2;&#x5BA3;&#x544A;&#x7684;&#x53C3;&#x6578;&#xFF0C;&#x6BCF;&#x500B;&#x51FD;&#x5F0F;&#x5747;&#x63A5;&#x53D7;&#x5169;&#x500B;&#x984D;&#x5916;&#x53C3;&#x6578;:this&#x3001;argument&#x3002;this &#x53C3;&#x6578;&#x7684;&#x503C;&#x7531;<strong>&#x547C;&#x53EB;&#x6A21;&#x5F0F;</strong>&#x6C7A;&#x5B9A;&#x3002;JavaScript &#x6709;&#x56DB;&#x7A2E;&#x547C;&#x53EB;&#x6A21;&#x5F0F;&#x3002;</p>
<ul>
<li>&#x65B9;&#x6CD5;&#x547C;&#x53EB;&#x6A21;&#x5F0F;</li>
<li>&#x51FD;&#x5F0F;&#x547C;&#x53EB;&#x6A21;&#x5F0F;</li>
<li>&#x5EFA;&#x69CB;&#x5F0F;&#x547C;&#x53EB;&#x6A21;&#x5F0F;</li>
<li>apply &#x547C;&#x53EB;&#x6A21;&#x5F0F;</li>
</ul>
<p>&#x51FD;&#x5F0F;&#x547C;&#x53EB;&#x662F;&#x7528;&#x4E00;&#x5C0D;&#x5C0F;&#x62EC;&#x865F;&#xFF0C;&#x63A5;&#x5728;&#x4EFB;&#x4F55;&#x7522;&#x751F;&#x51FD;&#x5F0F;&#x503C;&#x5F97;&#x904B;&#x7B97;&#x5F0F;&#x5F8C;&#x9762;&#x3002;&#x7576;&#x5F15;&#x6578;&#x91CF;&#x8207;&#x53C3;&#x6578;&#x91CF;&#x4E0D;&#x76F8;&#x7B49;&#x6642;&#xFF0C;&#x4E0D;&#x6703;&#x7522;&#x751F;&#x57F7;&#x884C;&#x7684;&#x932F;&#x8AA4;&#xFF0C;&#x591A;&#x9918;&#x7684;&#x6703;&#x88AB;&#x5FFD;&#x7565;&#xFF0C;&#x4E0D;&#x8DB3;&#x7684;&#x5DF2; undefined &#x53D6;&#x4EE3;&#x3002;&#x5F15;&#x6578;&#x503C;&#x4E0D;&#x6703;&#x578B;&#x5225;&#x6AA2;&#x67E5;&#xFF0C;&#x4EFB;&#x4F55;&#x578B;&#x5225;&#x7684;&#x503C;&#x90FD;&#x80FD;&#x50B3;&#x7D66;&#x53C3;&#x6578;&#x3002;</p>
<h4 id="4-3-1">4-3-1 &#x65B9;&#x6CD5;&#x547C;&#x53EB;</h4>
<p>&#x7576;&#x51FD;&#x5F0F;&#x5132;&#x5B58;&#x6210;&#x7269;&#x4EF6;&#x7684;&#x7279;&#x6027;&#x6642;&#xFF0C;&#x7A31;&#x70BA;<strong>&#x65B9;&#x6CD5;</strong>&#xFF0C;&#x547C;&#x53EB;&#x65B9;&#x6CD5;&#x6642;&#xFF0C;this &#x5373;&#x8207;&#x7269;&#x4EF6;&#x76F8;&#x9023;&#x7E6B;&#x3002;&#x5982;&#x679C;&#x547C;&#x53EB;&#x7684;&#x904B;&#x7B97;&#x5F0F;&#x5305;&#x542B;&#x7CBE;&#x78BA;&#x5F0F;&#xFF08;. &#x9EDE;&#x865F;&#x904B;&#x7B97;&#x5B50;&#x3001;&#x9663;&#x5217;&#x8A3B;&#x6A19;(&#x7D22;&#x5F15;Index)&#x904B;&#x7B97;&#x5F0F;&#xFF09;&#xFF0C;&#x5247;&#x547C;&#x53EB;&#x6642;&#x8996;&#x540C;&#x65B9;&#x6CD5;&#x3002;</p>
<pre><code class="lang-sh">var myObject = {
    value : 0;
    increment : <span class="pl-k">function</span> (inc){
    this.value += typeof inc === <span class="pl-s">&apos;number&apos;</span> ? inc : 1;
    }
};

myObject.increment();
document.writeln(myObject.value);    // 1

myObject.increment(2);
document.writeln(myObject.value);    // 3
</code></pre>
<p>&#x65B9;&#x6CD5;&#x53EF;&#x4F7F;&#x7528; this &#x5B58;&#x53D6;&#x7269;&#x4EF6;&#xFF0C;&#x80FD;&#x5F9E;&#x7269;&#x4EF6;&#x4E2D;&#x64F7;&#x53D6;&#x503C;&#xFF0C;&#x6216;&#x662F;&#x8ABF;&#x6574;&#x7269;&#x4EF6;&#xFF0C;this &#x5C0D;&#x7269;&#x4EF6;&#x7684;&#x7E6B;&#x7D50;&#xFF08;binding&#xFF09;&#x767C;&#x751F;&#x5728;<em>&#x547C;&#x53EB;&#x671F;&#x9593;</em>&#x3002;&#x7E6B;&#x7D50;&#x767C;&#x751F;&#x6642;&#x671F;&#x8F03;&#x665A;&#xFF0C;&#x8B93;&#x4F7F;&#x7528; this &#x7684;&#x51FD;&#x5F0F;&#x80FD;&#x53D7;&#x5230;&#x9AD8;&#x5EA6;&#x91CD;&#x8907;&#x5229;&#x7528;&#x3002;
&#x5229;&#x7528; this &#x53D6;&#x7684;&#x74B0;&#x5883;&#x8B8A;&#x6578;&#x7684;&#x65B9;&#x6CD5;&#x7A31;<strong>public method</strong>&#x3002;</p>
<h4 id="4-3-2">4-3-2 &#x51FD;&#x5F0F;&#x547C;&#x53EB;</h4>
<p>&#x7576;&#x51FD;&#x5F0F;&#x4E0D;&#x662F;&#x7269;&#x4EF6;&#x7684;&#x7279;&#x6027;&#x6642;&#xFF0C;&#x5247;&#x50CF;&#x51FD;&#x5F0F;&#x4E00;&#x822C;&#x88AB;&#x547C;&#x53EB;</p>
<pre><code class="lang-sh">var sum = add(3,4);    // sum = 7
</code></pre>
<p>&#x9019;&#x7A2E;&#x547C;&#x53EB;&#x6A21;&#x5F0F;&#xFF0C;this &#x5C07;&#x7D50;&#x5408;&#x81F3;&#x5168;&#x57DF;&#x8B8A;&#x6578;;&#x9019;&#x9EDE;&#x5F0F;&#x8A9E;&#x8A00;&#x8A2D;&#x8A08;&#x4E0A;&#x7684;&#x932F;&#x8AA4;&#x3002;&#x9019;&#x9805;&#x932F;&#x8AA4;&#x5C0E;&#x81F4;&#x65B9;&#x6CD5;&#x7121;&#x6CD5;&#x5217;&#x7528;&#x5167;&#x5C64;&#x51FD;&#x5F0F;&#x5354;&#x52A9;&#x5DE5;&#x4F5C;&#xFF0C;&#x56E0;&#x70BA;&#x5167;&#x5C64;&#x51FD;&#x5F0F;&#x4E26;&#x672A;&#x4EAB;&#x6709;&#x65B9;&#x6CD5;&#x5C0D;&#x7269;&#x4EF6;&#x7684;&#x5B58;&#x53D6;&#xFF0C;&#x4ED6;&#x7684; this &#x7D50;&#x5408;&#x5230;&#x932F;&#x8AA4;&#x7684;&#x5730;&#x65B9;&#x4E86;&#x3002;
&#x89E3;&#x6C7A;&#x65B9;&#x5F0F;&#x5C31;&#x662F;&#x5B9A;&#x7FA9;&#x4E00;&#x500B;&#x8B8A;&#x6578;&#xFF0C;&#x4E26;&#x6307;&#x6D3E;&#x4ED6;&#x7684;&#x503C;&#x70BA; this &#xFF0C;&#x5167;&#x5C64;&#x5C31;&#x53EF;&#x4EE5;&#x900F;&#x904E;&#x9019;&#x500B;&#x8B8A;&#x6578;&#x5B58;&#x53D6; this &#x3002;</p>
<pre><code class="lang-sh">myObject.double = <span class="hljs-function"><span class="pl-ent">function</span></span> (){
         var that = this;   // &#x89E3;&#x6C7A;&#x9014;&#x5F91;
         var helper = <span class="hljs-function"><span class="pl-ent">function</span></span> (){
             that.value = add(that.value,that.value)
         };
         helper();    //&#x628A; helper &#x8996;&#x70BA;&#x51FD;&#x5F0F;&#x800C;&#x547C;&#x53EB;
};
myObject.double();
document.writeln(myObject.getValue());  // 6
</code></pre>
<h4 id="4-3-3">4-3-3 &#x5EFA;&#x69CB;&#x5F0F;&#x547C;&#x53EB;</h4>
<p>Javascrip &#x662F;&#x500B;&#x539F;&#x578B;&#x7E7C;&#x627F;&#x7684;&#x8A9E;&#x8A00;&#xFF0C;&#x5C31;&#x662F;&#x7269;&#x4EF6;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x7E7C;&#x627F;&#x5176;&#x4ED6;&#x7269;&#x4EF6;&#x7684;&#x7279;&#x6027;&#x3002;&#x9019;&#x500B;&#x8A9E;&#x8A00;&#x4E0D;&#x7528;&#x985E;&#x5225;&#x3002;
&#x5982;&#x679C;&#x51FD;&#x5F0F;&#x547C;&#x53EB;&#x6642;&#x52A0;&#x4E0A;&#x5B57;&#x9996;&#x8A5E; new &#xFF0C;&#x5EFA;&#x7ACB;&#x7684;&#x65B0;&#x7269;&#x4EF6;&#x5C07;&#x9644;&#x6709;&#x5C0D;&#x51FD;&#x5F0F;&#x7684; prototype &#x6210;&#x54E1;&#x503C;&#x7684;&#x96B1;&#x85CF;&#x806F;&#x7D50;&#xFF0C;&#x800C;&#x4E14;** this &#x4E5F;&#x5C07;&#x8207;&#x65B0;&#x7269;&#x4EF6;&#x7D50;&#x5408;**&#x3002;
&#x5B57;&#x9996;&#x8A5E; new &#x4E5F;&#x6539;&#x8B8A;&#x4E86; return &#x884C;&#x70BA;&#xFF0C;&#x5F8C;&#x9762;&#x6703;&#x63D0;&#x5230;&#x3002;</p>
<pre><code class="lang-sh">// &#x5EFA;&#x7ACB;&#x6210;&#x70BA; Quo &#x7684;&#x5EFA;&#x69CB;&#x5F0F;&#xFF0C;&#x8B93;&#x4ED6;&#x5177;&#x6709;status &#x7279;&#x6027;
var Quo = <span class="pl-k">function</span> (string){
    this.status = string;
};

//&#x70BA;&#x6240;&#x6709; Quo &#x7684;&#x5BE6;&#x4F8B;&#xFF0C;&#x8CE6;&#x4E88;&#x4E00;&#x500B; get_status &#x7684; public &#x65B9;&#x6CD5;&#x3002;
Quo.prototype.get_status = <span class="hljs-function"><span class="pl-ent">function</span></span> (){
    <span class="pl-c1">return</span> this.status;
};

//&#x88FD;&#x4F5C;&#x4E00;&#x500B; Quo &#x7684;&#x5BE6;&#x4F8B;
var myQuo = new Quo(<span class="pl-s">&quot;confused&quot;</span>);
document.writeln(myQuo.get_status());  //  confused
</code></pre>
<p>&#x8207;&#x5B57;&#x9996;&#x8A5E; new &#x5408;&#x7528;&#x7684;&#x51FD;&#x5F0F;&#xFF0C;&#x7A31;&#x70BA;<strong>&#x5EFA;&#x69CB;&#x5F0F;</strong>&#xFF08;consrtuctor&#xFF09;&#x3002;&#x9019;&#x7A2E;&#x98A8;&#x683C;&#x7684;&#x5EFA;&#x69CB;&#x5F0F;&#x4E26;&#x90E8;&#x5EFA;&#x8B70;&#x4F7F;&#x7528;&#xFF0C;&#x5F8C;&#x9762;&#x6709;&#x66F4;&#x597D;&#x7684;&#x66FF;&#x4EE3;&#x65B9;&#x6848;&#x3002;</p>
<h4 id="4-3-4-apply">4-3-4 apply &#x547C;&#x53EB;</h4>
<p>&#x56E0;&#x70BA; JavaScript &#x662F;&#x500B;&#x7269;&#x4EF6;&#x5C0E;&#x5411;&#x8A9E;&#x8A00;&#xFF0C;&#x51FD;&#x5F0F;&#x4E0B;&#x53EF;&#x4EE5;&#x6709;&#x65B9;&#x6CD5;&#x3002;</p>
<p>apply &#x65B9;&#x6CD5;&#x8B93;&#x6211;&#x5011;&#x5EFA;&#x69CB;&#x4E00;&#x500B;&#x5F15;&#x6578;&#x9663;&#x5217;&#xFF0C;&#x7528;&#x65BC;&#x547C;&#x53EB;&#x51FD;&#x5F0F;&#xFF0C;&#x4E5F;&#x80FD;&#x8B93;&#x6211;&#x5011;&#x4F7F;&#x7528; this &#x7684;&#x503C;&#x3002;<br>
apply &#x65B9;&#x6CD5;&#x63A5;&#x53D7;&#x5169;&#x500B;&#x53C3;&#x6578;&#xFF0C;&#x7B2C;&#x4E00;&#x500B;&#x662F;&#x61C9;&#x8A72;&#x8207; this &#x806F;&#x7E6B;&#x7684;&#x503C;&#xFF0C;&#x7B2C;&#x4E8C;&#x500B;&#x5247;&#x70BA;&#x53C3;&#x6578;&#x7684;&#x9663;&#x5217;&#x3002;</p>
<pre><code class="lang-sh">var array = [3,4];
var sum = add.apply(null,array);  //sum = 7

//&#x88FD;&#x4F5C;&#x4E00;&#x500B;&#x5177;&#x6709; status &#x6210;&#x54E1;&#x7269;&#x4EF6;
var statusObject = {
    status : <span class="pl-s">&apos;A-OK&apos;</span>
};

// statusObject &#x5206;&#x7E7C;&#x627F; Quo.prototype &#x7E7C;&#x627F;&#x800C;&#x4F86;
// &#x4F46;&#x6211;&#x5011;&#x53EF;&#x4EE5;&#x5728; statusObject &#x4E0A;&#x547C;&#x53EB; get_status &#x65B9;&#x6CD5;&#x547C;&#x53EB;
// &#x5118;&#x7BA1; statusObject &#x4E26;&#x4E0D;&#x64C1;&#x6709; get_status &#x65B9;&#x6CD5;
var status = Quo.prototype.get_status.apply(statusObject);    // status = <span class="pl-s">&apos;A-OK&apos;</span>
</code></pre>
<h2 id="4-4-arguments">4-4 arguments &#x9663;&#x5217;</h2>
<p>&#x51FD;&#x5F0F;&#x80FD;&#x5728;&#x547C;&#x53EB;&#x6642;&#x7372;&#x53D6;&#x7684;&#x984D;&#x5916;&#x53C3;&#x6578;&#xFF0C;&#x5373;&#x70BA; arguments &#x9663;&#x5217;&#x3002;&#x4ED6;&#x8B93;&#x51FD;&#x5F0F;&#x53D6;&#x7528;&#x6240;&#x6709;&#x5728;&#x547C;&#x53EB;&#x6642;&#x5019;&#x63D0;&#x4F9B;&#x7684;&#x5F15;&#x6578;&#xFF0C;<strong>&#x5305;&#x62EC;&#x4E26;&#x672A;&#x6307;&#x6D3E;&#x7D66;&#x53C3;&#x6578;&#x7684;&#x8D85;&#x984D;&#x5F15;&#x6578;</strong>&#x3002;</p>
<pre><code class="lang-sh">var sum = <span class="hljs-function"><span class="pl-ent">function</span></span> (){
    var i,sum = 0;
    <span class="pl-k">for</span> (i = 0; i &lt; arguments.length; i += 1){
    sum += arguments[i];
    }
    <span class="pl-c1">return</span> sum;
};
document.writeln(sum(4,8,15,16,23,42));  //  108

</code></pre>
<p>&#x4E0A;&#x4F8B;&#x4E26;&#x975E;&#x597D;&#x7528;&#x7684;&#x6A21;&#x5F0F;&#xFF0C;&#x5F8C;&#x9762;&#x6703;&#x5728;&#x8B1B;&#x5230;&#x3002;&#x56E0;&#x70BA;&#x8A2D;&#x8A08;&#x4E0A;&#x7684;&#x932F;&#x8AA4; <strong>arguments &#x4E26;&#x975E;&#x771F;&#x6B63;&#x7684;&#x9663;&#x5217;&#xFF0C;&#x4ED6;&#x662F;&#x500B;&#x50CF;&#x9663;&#x5217;&#x7684;&#x7269;&#x4EF6;</strong>&#xFF0C;&#x4ED6;&#x5177;&#x6709; length &#x7279;&#x6027;&#xFF0C;&#x4F46;&#x7F3A;&#x4E4F;&#x6240;&#x6709;&#x9663;&#x5217;&#x65B9;&#x6CD5;&#x3002;</p>
<h2 id="4-5">4-5 &#x56DE;&#x50B3;</h2>
<p>return &#x6558;&#x8FF0;&#x80FD;&#x8B93;&#x51FD;&#x5F0F;&#x63D0;&#x65E9;&#x56DE;&#x50B3;&#xFF0C;&#x57F7;&#x884C; return &#x6642;&#xFF0C;&#x51FD;&#x5F0F;&#x7ACB;&#x523B;&#x56DE;&#x50B3;&#xFF0C;&#x4E0D;&#x6703;&#x57F7;&#x884C;&#x5F8C;&#x7E8C;&#x7684;&#x6558;&#x8FF0;&#x3002;&#x82E5;&#x672A;&#x6307;&#x5B9A; return &#x503C;&#xFF0C;&#x5247;&#x56DE;&#x50B3; undefined &#x3002;</p>
<p>&#x5982;&#x679C;&#x51FD;&#x5F0F;&#x547C;&#x53EB;&#x6642;&#x9644;&#x6709;&#x5B57;&#x9996;&#x8A5E; new &#xFF0C;&#x800C;&#x4E14; return &#x503C;&#x4E0D;&#x662F;&#x7269;&#x4EF6;&#xFF0C;&#x5247;&#x6539;&#x70BA;&#x56DE;&#x50B3; this (&#x65B0;&#x7269;&#x4EF6;)&#x3002;</p>
<h2 id="4-6">4-6 &#x4F8B;&#x5916;&#x72C0;&#x6CC1;</h2>
<p>JavaScript &#x63D0;&#x4F9B;&#x4E00;&#x7A2E;&#x4F8B;&#x5916;&#x4E8B;&#x4EF6;(exception) &#x8655;&#x7406;&#x6A5F;&#x5236;&#x3002;&#x4F8B;&#x5916;&#x4E8B;&#x4EF6;&#x662F;&#x4E0D;&#x5C0B;&#x5E38;&#x7684;&#x707D;&#x96E3;(&#x4F46;&#x4E26;&#x975E;&#x4E0D;&#x518D;&#x9810;&#x671F;&#x4E2D;&#x7684;)&#xFF0C;&#x6703;&#x5E72;&#x64FE;&#x7A0B;&#x5F0F;&#x7684;&#x6B63;&#x5E38;&#x6D41;&#x5411;&#xFF0C;&#x5075;&#x6E2C;&#x5230;&#x6B64;&#x985E;&#x707D;&#x96E3;&#xFF0C;&#x7A0B;&#x5F0F;&#x61C9;&#x8A72;&#x4E1F;&#x51FA;&#x4F8B;&#x5916;&#x4E8B;&#x4EF6;&#x3002;</p>
<pre><code class="lang-sh">var add  = <span class="pl-k">function</span> (a,b){
    <span class="pl-k">if</span> (typeof a !== <span class="pl-s">&apos;unmber&apos;</span> || typeof b !== <span class="pl-s">&apos;unmber&apos;</span>){
       throw {
           name : <span class="pl-s">&apos;TypeError&apos;</span>,
           message : <span class="pl-s">&apos;add needs numbers&apos;</span>
       }
    }
    
    <span class="pl-c1">return</span> a + b;
};
</code></pre>
<p>throw &#x6558;&#x8FF0;&#x8CA0;&#x8CAC;&#x4E2D;&#x65B7;&#x51FD;&#x5F0F;&#x7684;&#x57F7;&#x884C;&#xFF0C;&#x4ED6;&#x61C9;&#x8A72;&#x8981;&#x62FF;&#x5230;&#x4E00;&#x500B; exception &#x7269;&#x4EF6;&#xFF0C;&#x7269;&#x4EF6;&#x4E2D;&#x5305;&#x542B;&#x8FA6;&#x8B58;&#x4F8B;&#x5916;&#x985E;&#x5225;&#x7684; name &#x7279;&#x6027;&#xFF0C;&#x4EE5;&#x53CA;&#x63CF;&#x8FF0;&#x4F8B;&#x5916;&#x6027;&#x8CEA;&#x7684; message &#x7279;&#x6027;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x5728;&#x5BB6;&#x9F4A;&#x4ED6;&#x7684;&#x7279;&#x6027;&#x3002;</p>
<pre><code class="lang-sh">var try_it = <span class="hljs-function"><span class="pl-ent">function</span></span> () {
    try {
        add(<span class="pl-s">&quot;seven&quot;</span>);
    } catch (e) {
        document.writeln(e.name + <span class="pl-s">&apos;:&apos;</span> + e.message);
    }
};
try_it();
</code></pre>
<p>&#x5982;&#x679C;&#x5728; try &#x5340;&#x584A;&#x4E2D;&#x4E1F;&#x51FA;&#x4F8B;&#x5916;&#x4E8B;&#x4EF6;&#xFF0C;&#x63A7;&#x5236;&#x6B0A;&#x5C07;&#x8F49;&#x4EA4;&#x5230; try &#x7684; catch &#x5B50;&#x53E5;&#x3002;</p>
<h2 id="4-7">4-7 &#x64F4;&#x5145;&#x578B;&#x5225;</h2>
<p>JavaScript &#x5141;&#x8A31;&#x57FA;&#x672C;&#x578B;&#x5225;&#x7684;&#x64F4;&#x5145;&#x3002;&#x64F4;&#x5145; Function.prototype &#x589E;&#x52A0;&#x4E00;&#x500B;&#x65B9;&#x6CD5;&#x5230;&#x6240;&#x6709;&#x51FD;&#x5F0F;&#x4E0B;&#xFF1A;</p>
<pre><code class="lang-sh">Function.prototype.method = <span class="pl-k">function</span> (name,func){
    this.prototype[name] =func;
    <span class="pl-c1">return</span> this;
};
</code></pre>
<p>&#x70BA; Function.prototype &#x6DFB;&#x52A0; method &#x65B9;&#x6CD5;&#x5F8C;&#xFF0C;&#x5C31;&#x4E0D;&#x518D;&#x9700;&#x8981;&#x9375;&#x5165; prototype &#x7279;&#x6027;&#x7684;&#x540D;&#x7A31;&#x3002;
JavaScript &#x6C92;&#x6709;&#x7368;&#x7ACB;&#x7684;&#x6574;&#x6578;&#x578B;&#x5225;&#xFF0C;&#x6240;&#x4EE5;&#x6709;&#x6642;&#x9700;&#x8981;&#x55AE;&#x7368;&#x62BD;&#x96E2;&#x6578;&#x503C;&#x4E2D;&#x6574;&#x6578;&#x90E8;&#x4EFD;&#x3002;&#x5E95;&#x4E0B;&#x6211;&#x5011;&#x64F4;&#x5145;&#x4E00;&#x500B; interger &#x65B9;&#x6CD5;&#x3002;</p>
<pre><code class="lang-sh">Number.method(<span class="pl-s">&apos;interger&apos;</span>,<span class="hljs-function"><span class="pl-ent">function</span></span> () {
   <span class="pl-c1">return</span> Math[this &lt; 0 ? <span class="pl-s">&apos;ceil&apos;</span> : <span class="pl-s">&apos;floor&apos;</span>](this);
});

document.writeln((-10 / 3).interger());  // -3
</code></pre>
<p>&#x5728;&#x6DF7;&#x96DC;&#x51FD;&#x5F0F;&#x5EAB;&#x6642;&#x52D9;&#x5FC5;&#x5C0F;&#x5FC3;&#xFF0C;&#x53EA;&#x5728;&#x7F3A;&#x5C11;&#x65B9;&#x6CD5;&#x6642;&#x624D;&#x64F4;&#x5145;&#xFF0C;&#x5247;&#x662F;&#x500B;&#x9632;&#x79A6;&#x6280;&#x5DE7;&#x3002;</p>
<pre><code class="lang-sh">Function.prototype.method = <span class="pl-k">function</span> (name , func){
    <span class="pl-k">if</span>(!this.prototype[name]){
        this.prototype[name] = func;
    }
};
</code></pre>
<p>&#x5728; for in &#x6558;&#x8FF0;&#x8207;&#x539F;&#x578B;&#x4E92;&#x52D5;&#x5F88;&#x5DEE;&#xFF08;&#x6548;&#x80FD;&#x5DEE;&#xFF09;&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528; hasOwnProperty &#x65B9;&#x6CD5;&#x906E;&#x64CB;&#x88AB;&#x7E7C;&#x627F;&#x7684;&#x7279;&#x6027;&#x3002;</p>
<h2 id="4-8">4-8 &#x905E;&#x8FF4;</h2>
<p>&#x905E;&#x8FF4;&#x51FD;&#x5F0F;(recursive function)&#xFF0C;&#x662F;&#x500B;&#x76F4;&#x63A5;&#x6216;&#x9593;&#x63A5;&#x547C;&#x53EB;&#x81EA;&#x5DF1;&#x7684;&#x51FD;&#x5F0F;&#x3002;&#x6709;&#x5F85;&#x89E3;&#x6C7A;&#x7684;&#x5927;&#x554F;&#x984C;&#xFF0C;&#x88AB;&#x5206;&#x89E3;&#x6210;&#x76F8;&#x4F3C;&#x7684;&#x5B50;&#x554F;&#x984C;&#x96C6;&#x5408;&#xFF0C;&#x6BCF;&#x500B;&#x5B50;&#x554F;&#x984C;&#x90FD;&#x6709;&#x4E00;&#x9805;&#x8F03;&#x5C0F;&#x7684;&#x89E3;&#x6C7A;&#x65B9;&#x6848;&#x3002;
&#x4E00;&#x822C;&#x800C;&#x8A00;&#xFF0C;&#x905E;&#x8FF4;&#x51FD;&#x5F0F;&#x6703;&#x81EA;&#x6211;&#x547C;&#x53EB;&#x5DF2;&#x89E3;&#x6C7A;&#x5B50;&#x554F;&#x984C;&#x3002;</p>
<p>&#x905E;&#x8FF4;&#x51FD;&#x5F0F;&#x53EF;&#x4EE5;&#x5206;&#x5E38;&#x6709;&#x6548;&#x7387;&#x7684;&#x64CD;&#x4F5C;&#x6A39;&#x72C0;&#x7D50;&#x69CB;&#xFF08;&#x5982;&#x700F;&#x89BD;&#x5668;&#x7684; DOM&#xFF09;&#xFF0C;&#x6BCF;&#x6B21;&#x905E;&#x8FF4;&#x90FD;&#x4EA4;&#x51FA;&#x4E00;&#x5C0F;&#x90E8;&#x5206;&#x3002;</p>
<pre><code class="lang-sh">// &#x5B9A;&#x7FA9; walk_the_DOM &#x51FD;&#x5F0F;&#xFF0C;&#x51FD;&#x5F0F;&#x5F9E;&#x6307;&#x5B9A;&#x7684;&#x7BC0;&#x9EDE;&#x958B;&#x59CB;&#xFF0C;
// &#x4F9D; HTML &#x4F86;&#x6E90;&#x78BC;&#x7684;&#x9806;&#x5E8F;&#xFF0C;&#x53C3;&#x8A2A;&#x6BCF;&#x500B;&#x6578;&#x7BC0;&#x9EDE;
// &#x547C;&#x53EB;&#x4E00;&#x500B;&#x51FD;&#x5F0F;&#xFF0C;&#x628A;&#x51FD;&#x5F0F;&#x9010;&#x4E00;&#x50B3;&#x7D66;&#x6BCF;&#x500B;&#x7BC0;&#x9EDE;
// walk_the_DOM &#x4E5F;&#x547C;&#x53EB;&#x81EA;&#x5DF1;&#xFF0C;&#x4EE5;&#x8655;&#x7406;&#x6BCF;&#x500B;&#x5B50;&#x7BC0;&#x9EDE;

var walk_the_DOM =<span class="pl-k">function</span> walk(node, func){
    func(node);
    node =node.firstChild;
    <span class="pl-k">while</span> (node){
        walk(node, func);
        node = node.nextSibling;
    }
};

// &#x5B9A;&#x7FA9; getElementsByAttribute &#x51FD;&#x5F0F;
// &#x63A5;&#x53D7;&#x5C6C;&#x6027;&#x540D;&#x7A31;&#x5B57;&#x4E32;&#xFF0C;&#x8207;&#x9078;&#x7528;&#x7684;&#x6BD4;&#x5C0D;&#x503C;
// &#x547C;&#x53EB; walk_the_DOM &#x4E26;&#x628A;&#x4E00;&#x500B;&#x5728;&#x7BC0;&#x9EDE;&#x4E2D;&#x6BD4;&#x5C0D;&#x5C6C;&#x6027;&#x540D;&#x7A31;&#x7684;&#x51FD;&#x5F0F;&#x50B3;&#x904E;&#x53BB;
// &#x627E;&#x5230;&#x7684;&#x7BC0;&#x9EDE;&#x5247;&#x7D2F;&#x7A4D;&#x5728; results &#x9663;&#x5217;&#x4E2D;

var getElementsByAttribute = functuon (att, value) {
    var results = [];
    
    walk_the_DOM(document.body, <span class="pl-k">function</span>(node){
        var actual = node.nodeType === 1 &amp;&amp; node.getAttribute(att);
        <span class="pl-k">if</span> (typeof actual === <span class="pl-s">&apos;string&apos;</span> &amp;&amp; (actual === value || typeof value !== <span class="pl-s">&apos;string&apos;</span>)){
           results.push(node);
        }
    
    });
    <span class="pl-c1">return</span> results;
};
</code></pre>
<h2 id="4-9">4-9 &#x7BC4;&#x570D;</h2>
<p>&#x5728;&#x7A0B;&#x5F0F;&#x8A9E;&#x8A00;&#x4E2D;&#x7684;<strong>&#x7BC4;&#x570D;</strong>&#xFF08;scope&#xFF09;&#xFF0C;&#x63A7;&#x5236;&#x4E86;&#x8B8A;&#x6578;&#x8207;&#x53C3;&#x6578;&#x7684;&#x53EF;&#x898B;&#x8207;&#x751F;&#x547D;&#x9031;&#x671F;&#x3002;&#x4ED6;&#x6E1B;&#x5C11;&#x7684;&#x547D;&#x540D;&#x7684;&#x885D;&#x7A81;&#xFF0C;&#x4E26;&#x63D0;&#x4F9B;&#x4E86;&#x81EA;&#x52D5;&#x8A18;&#x61B6;&#x9AD4;&#x7BA1;&#x7406;&#x6A5F;&#x5236;&#x3002;</p>
<pre><code class="lang-sh"> var foo = <span class="hljs-function"><span class="pl-ent">function</span></span> () {
     var a = 3, b = 5;
     
     var bar = <span class="hljs-function"><span class="pl-ent">function</span></span> () {
         var b = 7, c = 11;
         
         // a = 3, b = 7 ,c = 11
         a += b + c;
         
         // a = 21, b = 7, c = 11
     };
     // a = 3, b = 5, c = &#x672A;&#x5B9A;&#x7FA9;
     bar();
     // a = 21, b = 5
 };
</code></pre>
<p>JavaScript &#x7684;&#x78BA;&#x5177;&#x6709;&#x51FD;&#x5F0F;&#x7BC4;&#x570D;&#xFF0C;&#x5B9A;&#x7FA9;&#x5728;&#x51FD;&#x5F0F;&#x88E1;&#x7684;&#x53C3;&#x6578;&#x548C;&#x8B8A;&#x6578;&#xFF0C;&#x542B;&#x662F;&#x4EE5;&#x5916;&#x5373;&#x4E0D;&#x53EF;&#x898B;&#xFF0C;&#x5728;&#x5167;&#x5373;&#x53EF;&#x5728;&#x51FD;&#x5F0F;&#x5167;&#x7684;&#x4EFB;&#x4F55;&#x5730;&#x65B9;&#x90FD;&#x53EF;&#x898B;&#x5230;&#x9019;&#x500B;&#x8B8A;&#x6578;&#x3002;
&#x5728; JavaScript &#x4E2D;&#xFF0C;&#x6700;&#x597D;&#x5728;&#x51FD;&#x5F0F;&#x4E2D;&#x672C;&#x9AD4;&#x7684;&#x5E95;&#x7AEF;&#xFF0C;&#x5BA3;&#x544A;&#x6240;&#x6709;&#x51FD;&#x5F0F;&#x6240;&#x7528;&#x5230;&#x7684;&#x8B8A;&#x6578;&#x3002;</p>
<h2 id="4-10-closure">4-10 closure</h2>
<p>&#x4E4B;&#x524D;&#x7BC4;&#x4F8B;&#x5728; getElementsByAttribute &#x51FD;&#x5F0F;&#x80FD;&#x904B;&#x4F5C;&#x7684;&#x539F;&#x56E0;&#xFF0C;&#x5728;&#x65BC;&#x4ED6;&#x5BA3;&#x544A;&#x4E86; results &#x8B8A;&#x6578;&#xFF0C;&#x800C;&#x4E14;&#x4ED6;&#x50B3;&#x7D66; walk_the_DOM &#x7684;&#x5167;&#x5C64;&#x51FD;&#x6578;&#x4E5F;&#x80FD;&#x53D6;&#x7528; results &#x8B8A;&#x6578;&#x3002;
&#x767C;&#x751F;&#x5167;&#x5C64;&#x6BD4;&#x5916;&#x5C64;&#x51FD;&#x5F0F;&#x751F;&#x547D;&#x9031;&#x671F;&#x66F4;&#x5E38;&#x7684;&#x6642;&#x5019;&#x3002;</p>
<p>&#x4E4B;&#x524D;&#x7BC4;&#x4F8B;&#x88FD;&#x4F5C;&#x4E86; myObject&#xFF0C;&#x4ED6;&#x6709; value &#x8207; increment &#x65B9;&#x6CD5;&#xFF0C;&#x73FE;&#x5728;&#x793A;&#x7BC4;&#x5982;&#x548C;&#x4FDD;&#x8B77;&#x503C;&#xFF0C;&#x4E0D;&#x88AB;&#x672A;&#x6388;&#x6B0A;&#x7684;&#x4F86;&#x6E90;&#x96A8;&#x610F;&#x6539;&#x8B8A;&#x3002;&#x5C07;&#x900F;&#x904E;<strong>&#x547C;&#x53EB;&#x4E00;&#x500B;&#x50B3;&#x56DE;&#x7269;&#x4EF6;&#x5BE6;&#x5B57;&#x7684;&#x51FD;&#x5F0F;</strong>&#x800C;&#x521D;&#x59CB;&#x5316; myObject&#x3002;</p>
<pre><code class="lang-sh">var myObject = <span class="hljs-function"><span class="pl-ent">function</span></span> () {
     var value = 0;
     
     <span class="pl-c1">return</span> {
          increment : <span class="pl-k">function</span> (inc){
             value += typeof inc === <span class="pl-s">&apos;number&apos;</span> ? inc : 1;
          },
          getValue : <span class="hljs-function"><span class="pl-ent">function</span></span> () {
             <span class="pl-c1">return</span> value;
          }
     }
 }
 }();

</code></pre>
<p>&#x9019;&#x500B;&#x51FD;&#x5F0F;&#x5B9A;&#x7FA9;&#x4E86; value &#x8B8A;&#x6578;&#xFF0C;&#x4ECD;&#x53EF;&#x88AB; icrement &#x8207; getValue &#x65B9;&#x6CD5;&#x53D6;&#x7528;&#xFF0C;&#x4F46;&#x51FD;&#x5F0F;&#x7BC4;&#x570D;&#x628A;&#x4ED6;&#x96B1;&#x85CF;&#x8D77;&#x4F86;&#xFF0C;&#x4E0D;&#x7136;&#x7A0B;&#x5F0F;&#x7684;&#x5176;&#x9918;&#x90E8;&#x4EFD;&#x898B;&#x5230;&#x3002;&#x4E26;&#x975E;&#x628A;&#x51FD;&#x5F0F;&#x672C;&#x8EAB;&#x6307;&#x6D3E;&#x7D66; myObject&#xFF0C;&#x800C;&#x662F;&#x628A;&#x51FD;&#x5F0F;&#x7684;&#x7D50;&#x679C;&#x6307;&#x6D3E;&#x904E;&#x53BB;&#x3002;</p>
<p>&#x4E4B;&#x524D;&#x7BC4;&#x4F8B;&#x63D0;&#x904E; Quo &#x5EFA;&#x69CB;&#x5F0F;&#xFF0C;&#x4ED6;&#x6703;&#x7522;&#x751F;&#x5177;&#x6709; status &#x7279;&#x6027;&#x8207; get_status &#x65B9;&#x6CD5;&#x7684;&#x7269;&#x4EF6;&#x3002;&#x5E95;&#x4E0B;&#x5B9A;&#x7FA9;&#x4E00;&#x500B;&#x4E0D;&#x540C;&#x7684; quo &#x51FD;&#x5F0F;&#x3002;</p>
<pre><code class="lang-sh">var quo = functon (status) {
    <span class="pl-c1">return</span> {
        get_status : <span class="hljs-function"><span class="pl-ent">function</span></span> () {
            <span class="pl-c1">return</span> status;
        }
    };
};
// &#x88FD;&#x4F5C;&#x4E00;&#x500B; quo &#x5BE6;&#x4F8B;

var myQuo = quo(<span class="pl-s">&quot;amazed&quot;</span>);
document.writeln(myObject.get_status());
</code></pre>
<p>&#x4E0A;&#x4F8B;&#x4E2D;&#x7684; quo &#x51FD;&#x5F0F;&#xFF0C;&#x4E0D;&#x9700;&#x8981;&#x5B57;&#x9996;&#x8A5E; new &#xFF0C;&#x7576;&#x6211;&#x5011;&#x547C;&#x53EB; quo&#xFF0C;&#x4ED6;&#x56DE;&#x50B3;&#x5305;&#x542B; get_status &#x65B9;&#x6CD5;&#x7684;&#x65B0;&#x7269;&#x4EF6;&#x3002;&#x5C0D;&#x8A72;&#x7269;&#x4EF6;&#x7684;&#x53C3;&#x8003;&#x5247;&#x5132;&#x5B58;&#x5728; myQuo &#x3002;
get_status &#x65B9;&#x6CD5;&#x4ECD;&#x6709;&#x5C0D; quo &#x7684; status &#x7279;&#x6027;&#x7684;&#x512A;&#x5148;&#x5B58;&#x53D6;&#x6B0A;&#xFF0C;&#x76E1;&#x7BA1; quo &#x5DF2;&#x7D93;&#x88AB;&#x56DE;&#x50B3;&#x4E86;&#x3002;
get_status &#x5C0D;<strong>&#x53C3;&#x6578;&#x526F;&#x672C;&#x6C92;&#x6709;&#x5B58;&#x53D6;&#x6B0A;</strong>&#xFF0C;&#x800C;&#x662F;&#x5C0D;<strong>&#x53C3;&#x6578;&#x672C;&#x8EAB;&#x6709;&#x5B58;&#x53D6;&#x6B0A;</strong>&#x3002;&#x56E0;&#x70BA;&#x51FD;&#x5F0F;&#x80FD;&#x53D6;&#x7528;&#x5EFA;&#x9020;&#x4ED6;&#x672C;&#x8EAB;&#x7684;&#x80CC;&#x666F;&#x74B0;&#x5883;&#xFF0C;&#x624D;&#x6709;&#x9019;&#x7A2E;&#x53EF;&#x80FD;&#xFF0C;&#x9019;&#x7A2E;&#x72C0;&#x6CC1;&#x7A31;&#x70BA;<strong>&#x9589;&#x5305;</strong>&#xFF08;closure&#xFF09;&#x3002;</p>
<p>&#x518D;&#x5BE6;&#x4F5C;&#x4E00;&#x500B;&#x7BC4;&#x4F8B;&#xFF0C;&#x5B9A;&#x7FA9;&#x4E00;&#x500B;&#x628A; DOM &#x7BC0;&#x9EDE;&#x7684;&#x80CC;&#x666F;&#x8A2D;&#x70BA;&#x9EC3;&#x8272;&#xFF0C;&#x518D;&#x9010;&#x6F38;&#x8B8A;&#x6210;&#x767D;&#x8272;&#x3002;</p>
<pre><code class="lang-sh">var fade = <span class="pl-k">function</span> (node)
{
    var level = 1;
    var step = <span class="hljs-function"><span class="pl-ent">function</span></span> () {
        var hex = level.toString(16);
        node.style.backgroundColor = <span class="pl-s">&apos;#ffff&apos;</span> + hex + hex;
        <span class="pl-k">if</span> (level &lt; 15) {
            level += 1;
            <span class="pl-c1">set</span>Timeout(step, 100); 
        }
    };
    <span class="pl-c1">set</span>Timeout(step, 100);
};

fade(document.body);
</code></pre>
<p>&#x5167;&#x5C64;&#x51FD;&#x5F0F;&#x76F4;&#x63A5;&#x53D6;&#x7528;&#x5916;&#x5C64;&#x51FD;&#x5F0F;&#x7684;&#x8B8A;&#x6578;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x53D6;&#x7528;&#x8B8A;&#x6578;&#x526F;&#x672C;&#x3002;</p>
<h2 id="4-11">4-11 &#x56DE;&#x547C;</h2>
<p>&#x51FD;&#x5F0F;&#x8B93;&#x4E0D;&#x9023;&#x7E8C;&#x4E8B;&#x4EF6;&#x7684;&#x8655;&#x7406;&#x66F4;&#x5BB9;&#x6613;&#x3002;&#x7DB2;&#x8DEF;&#x4E0A;&#x7684;&#x540C;&#x6B65;&#x6027;&#x8ACB;&#x6C42;&#xFF0C;&#x4F7F;&#x5F97;&#x7528;&#x6236;&#x7AEF;&#x8655;&#x65BC;&#x300E;&#x51CD;&#x7D50;&#x300F;&#x72C0;&#x614B;&#x3002;&#x8F03;&#x4F73;&#x7684;&#x65B9;&#x5F0F;&#x5247;&#x662F;&#x88FD;&#x4F5C;&#x975E;&#x540C;&#x6B65;&#x8ACB;&#x6C42;&#xFF0C;&#x63D0;&#x4F9B;&#x56DE;&#x547C;&#x51FD;&#x5F0F;&#xFF0C;&#x5728;&#x6536;&#x5230;&#x4F3A;&#x670D;&#x5668;&#x56DE;&#x61C9;&#x624D;&#x547C;&#x53EB;&#x9019;&#x500B;&#x51FD;&#x5F0F;&#xFF0C;&#x6240;&#x4EE5;&#x7528;&#x6236;&#x7AEF;&#x4E0D;&#x6703;&#x88AB;&#x963B;&#x585E;&#x3002;</p>
<pre><code class="lang-sh"> request = prepare_the_request();
 sent_request_asynchronously(request, <span class="pl-k">function</span> (response) {
      display(response);
 });
</code></pre>
<p>&#x5C0D; sent_request_asynchronously &#x51FD;&#x5F0F;&#x50B3;&#x9001;&#x4E00;&#x500B;&#x51FD;&#x5F0F;&#x53C3;&#x6578;&#xFF0C;&#x8A72;&#x51FD;&#x5F0F;&#x53C3;&#x6578;&#x5C07;&#x65BC;&#x63A5;&#x6536;&#x5230;&#x56DE;&#x61C9;&#x6642;&#x88AB;&#x547C;&#x53EB;&#x3002;</p>
<h2 id="4-12">4-12 &#x6A21;&#x7D44;</h2>
<p>&#x6211;&#x5011;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x51FD;&#x5F0F;&#x8207; closure &#x88FD;&#x4F5C;&#x6A21;&#x7D44;&#xFF0C;&#x6A21;&#x7D44;&#x662F;&#x500B;&#x51FD;&#x5F0F;&#x6216;&#x7269;&#x4EF6;&#xFF0C;&#x7528;&#x65BC;&#x5448;&#x73FE;&#x4E00;&#x500B;&#x4ECB;&#x9762;&#xFF0C;&#x4F46;&#x96B1;&#x85CF;&#x8D77;&#x4ED6;&#x7684;&#x72C0;&#x614B;&#x8207;&#x5BE6;&#x4F5C;&#xFF0C;&#x85C9;&#x7531;&#x4F7F;&#x7528;&#x51FD;&#x5F0F;&#x7522;&#x751F;&#x6A21;&#x7D44;&#xFF0C;&#x5E7E;&#x4E4E;&#x53EF;&#x4EE5;&#x6D88;&#x9664;&#x5168;&#x57DF;&#x8B8A;&#x6578;&#x7684;&#x4F7F;&#x7528;&#xFF0C;&#x9650;&#x5236;&#x4E86; JavaScript &#x6700;&#x7CDF;&#x7684;&#x529F;&#x80FD;&#x4E4B;&#x4E00;&#x3002;</p>
<p>&#x6211;&#x5011;&#x60F3;&#x70BA; String &#x64F4;&#x5145;&#x4E00;&#x500B; deentityify &#x65B9;&#x6CD5;&#xFF0C;&#x4ED6;&#x7684;&#x529F;&#x80FD;&#x662F;&#x5728;&#x5B57;&#x4E32;&#x4E2D;&#x5C0B;&#x627E; HTML tag &#x4E26;&#x7528;&#x610F;&#x7FA9;&#x76F8;&#x540C;&#x7684;&#x5B57;&#x53D6;&#x4EE3;&#x3002;&#x628A;&#x7269;&#x4EF6;&#x5B9A;&#x7FA9;&#x5728;&#x51FD;&#x5F0F;&#x88E1;&#xFF0C;&#x4F46;&#x56E0;&#x6BCF;&#x6B21;&#x547C;&#x53EB;&#x51FD;&#x5F0F;&#x6642;&#x90FD;&#x9700;&#x4F30;&#x7B97;&#x5B57;&#x4E32;&#x5BE6;&#x5B57;&#xFF0C;&#x9020;&#x6210;&#x57F7;&#x884C;&#x671F;&#x7684;&#x8CA0;&#x64D4;&#x3002;&#x6700;&#x7406;&#x60F3;&#x7684;&#x65B9;&#x5F0F;&#xFF0C;&#x662F;&#x628A;&#x7269;&#x4EF6;&#x653E;&#x5165; closure&#xFF0C;&#x6216;&#x5728;&#x63D0;&#x4F9B;&#x4E00;&#x500B;&#x65B0;&#x589E;&#x5BE6;&#x9AD4;&#x7684;&#x65B9;&#x6CD5;&#x3002;</p>
<pre><code class="lang-sh">String.method(<span class="pl-s">&apos;deentityify&apos;</span>,<span class="hljs-function"><span class="pl-ent">function</span></span> () { 
    //&#x5BE6;&#x9AD4;&#x8868;&#xFF0C;&#x5BE6;&#x9AD4;&#x7684;&#x540D;&#x7A31;&#x8207;&#x5B57;&#x5143;&#x7684;&#x5C0D;&#x7167;&#x3002;
    var entity ={
        quot: <span class="pl-s">&apos;&quot;&apos;</span>,
        lt: <span class="pl-s">&apos;&lt;&apos;</span>,
        gt: <span class="pl-s">&apos;&gt;&apos;</span>
    };
    
 // &#x56DE;&#x50B3; deentityify &#x65B9;&#x6CD5;
 <span class="pl-c1">return</span> <span class="hljs-function"><span class="pl-ent">function</span></span> () {
 
 // &#x5E95;&#x4E0B;&#x70BA; deentityify &#x65B9;&#x6CD5;&#xFF0C;&#x5C0B;&#x627E;&#x4EE5; &#xFF06; &#x958B;&#x982D;&#xFF0C;&#x4EE5; ; &#x7D50;&#x5C3E;&#x7684;&#x5B57;&#x4E32;
 // &#x5982;&#x679C;&#x5176;&#x4E2D;&#x5B57;&#x5143;&#x5132;&#x5B58;&#x5728;&#x5BE6;&#x9AD4;&#x8868;&#x4E2D;&#xFF0C;&#x5247;&#x4EE5;&#x76F8;&#x7B49;&#x7684;&#x5B57;&#x4E32;&#x53D6;&#x4EE3;&#x5BE6;&#x9AD4;&#x3002;
     <span class="pl-c1">return</span> this.replace(/&amp;([^&amp;;]+);/g,
     <span class="pl-k">function</span> (a, b) {
          var r = entity[b];
          <span class="pl-c1">return</span> typeof r === <span class="pl-s">&apos;string&apos;</span> ? r : a;
     }
   );
 };
}());
</code></pre>
<p>&#x6CE8;&#x610F;&#x6700;&#x5F8C;&#x4E00;&#x884C;&#xFF0C;&#x6211;&#x5011;&#x7ACB;&#x5373;&#x547C;&#x53EB;&#x525B;&#x662F;&#x7528; &#xFF08;&#xFF09;&#x904B;&#x7B97;&#x88FD;&#x9020;&#x51FD;&#x5F0F;&#x3002;&#x6B64;&#x6642;&#x7684;&#x547C;&#x53EB;&#x5C07;&#x5EFA;&#x7ACB;&#x4E26;&#x56DE;&#x50B3;&#x8B8A;&#x6210; deentityify &#x7684;&#x51FD;&#x5F0F;&#x3002;</p>
<pre><code class="lang-sh"> document.writeln(<span class="pl-s">&apos;&amp;lt;&amp;quot;&amp;gt;&apos;</span>.deentityify()); // &lt;<span class="pl-s">&apos;&apos;</span>&gt;
</code></pre>
<p>&#x6A21;&#x7D44;&#x5229;&#x7528;&#x51FD;&#x5F0F;&#x7BC4;&#x570D;&#x8207; closure &#xFF0C;&#x5EFA;&#x7ACB;&#x7E6B;&#x7D50;&#x8207; private &#x95DC;&#x4FC2;&#xFF0C;&#x672C;&#x4F8B;&#x4E2D;&#x53EA;&#x6709; deentityify &#x65B9;&#x6CD5;&#x53EF;&#x4EE5;&#x5B58;&#x53D6;&#x5BE6;&#x9AD4;&#x8CC7;&#x6599;&#x7D50;&#x69CB;&#x3002;</p>
<p>&#x5E38;&#x7528;&#x7684;&#x6A21;&#x5F0F;&#x6A21;&#x5F0F;&#xFF0C;&#x4E00;&#x500B;&#x300E;&#x5B9A;&#x7FA9; private &#x8B8A;&#x6578;&#x8207;&#x51FD;&#x5F0F;&#x300F;&#x7684;&#x51FD;&#x5F0F;; &#x5B83;&#x53EF;&#x4EE5;&#x5EFA;&#x7ACB;&#x53D6;&#x7528; private &#x8B8A;&#x6578;&#x8207;&#x51FD;&#x5F0F;&#x7684;&#x7279;&#x8A31;&#x51FD;&#x5F0F;&#xFF0C;&#x800C;&#x5F8C;&#x628A;&#x7279;&#x8A31;&#x51FD;&#x5F0F;&#x56DE;&#x50B3;&#x6216;&#x5132;&#x5B58;&#x65BC;&#x53EF;&#x5B58;&#x53D6;&#x7684;&#x5730;&#x65B9;&#x3002;&#x4F7F;&#x7528;&#x6A21;&#x7D44;&#x6A21;&#x5F0F;&#xFF0C;&#x53EF;&#x4EE5;&#x524A;&#x6E1B;&#x5168;&#x57DF;&#x8B8A;&#x6578;&#x7684;&#x4F7F;&#x7528;&#xFF0C;&#x5B83;&#x63A8;&#x5EE3;&#x4E86;&#x8CC7;&#x8A0A;&#x96B1;&#x85CF;&#x53CA;&#x5176;&#x4ED6;&#x826F;&#x597D;&#x7684;&#x8A2D;&#x8A08;&#x7FD2;&#x6163;&#x3002;</p>
<p>&#x5047;&#x8A2D;&#x88FD;&#x4F5C;&#x4E00;&#x500B;&#x7522;&#x751F;&#x6D41;&#x6C34;&#x865F;&#x7684;&#x7269;&#x4EF6;</p>
<pre><code class="lang-sh">var serial_maker = <span class="hljs-function"><span class="pl-ent">function</span></span> (){
  var prefix = <span class="pl-s">&apos;&apos;</span>;
  var seq = 0;
  <span class="pl-c1">return</span> {
      <span class="pl-c1">set</span>_prefix : <span class="pl-k">function</span>(p){
          prefix = String(p);
      },
      <span class="pl-c1">set</span>_seq : <span class="pl-k">function</span>(s){
          seq = s;
      },
      gensym : <span class="hljs-function"><span class="pl-ent">function</span></span>(){
          var result = prefix + seq;
          seq += 1;
          <span class="pl-c1">return</span> result;
      }
   };  
 }();
 
 var seqer = serial_maker();
 seqer.set_prefix = <span class="pl-s">&apos;Q&apos;</span>;
 seqer.set_seq = 1000;
 var unique = seqer.gensym(); //&#x5B57;&#x4E32; unique = <span class="pl-s">&quot;Q1000&quot;</span>
</code></pre>
<p>&#x4E0A;&#x4F8B;&#x7684;&#x65B9;&#x6CD5;&#x672A;&#x4F7F;&#x7528; this &#x6216; that&#x3002;&#x7D50;&#x679C;&#x5247;&#x662F;&#x4E0D;&#x6703;&#x5916;&#x6D29;&#x7684; seqer&#xFF0C;&#x9664;&#x4E86;&#x540C;&#x6A23;&#x7372;&#x5F97;&#x65B9;&#x6CD5;&#x7684;&#x5141;&#x8A31;&#xFF0C;&#x5426;&#x5247;&#x7121;&#x6CD5;&#x6539;&#x8B8A; prefix &#x6216; seq&#x3002;
seqer &#x7269;&#x4EF6;&#x662F;&#x53EF;&#x8B8A;&#x5F97;&#xFF0C;&#x6240;&#x4EE5;&#x65B9;&#x6CD5;&#x96D6;&#x53EF;&#x4EE5;&#x53D6;&#x4EE3;&#xFF0C;&#x4F46;&#x4ECD;&#x7136;&#x4E0D;&#x6703;&#x958B;&#x653E;&#x5176;&#x7955;&#x5BC6;&#x8CC7;&#x6599;&#x7684;&#x5B58;&#x53D6;&#x3002;seqer &#x4E0D;&#x904E;&#x662F;&#x51FD;&#x5F0F;&#x7684;&#x96C6;&#x5408;&#xFF0C;&#x9019;&#x4E9B;&#x51FD;&#x5F0F;&#x5247;&#x4FDD;&#x8B49;&#x5177;&#x6709;&#x662F;&#x7528;&#x6216;&#x8ABF;&#x6574;&#x7955;&#x5BC6;&#x8CC7;&#x6599;&#x7684;&#x7279;&#x6B8A;&#x80FD;&#x529B;&#x3002;</p>
<p>&#x6211;&#x5011;&#x628A; seqer.gensym &#x50B3;&#x7D66;&#x7B2C;&#x4E09;&#x65B9;&#x51FD;&#x5F0F;&#xFF0C;&#x51FD;&#x5F0F;&#x5C07;&#x80FD;&#x7522;&#x751F;&#x552F;&#x4E00;&#x5B57;&#x4E32;&#xFF0C;&#x4F46;&#x7121;&#x6CD5;&#x6539;&#x8B8A; prefix &#x6216; seq &#x3002;</p>
<h2 id="4-13-cascade">4-13 cascade</h2>
<p>&#x6709;&#x4E9B;&#x65B9;&#x6CD5;&#x6C92;&#x6709;&#x50B3;&#x503C;&#x3002;&#x4EE5;&#x8A2D;&#x5B9A;&#x6539;&#x8B8A;&#x7269;&#x4EF6;&#x72C0;&#x614B;&#x7684;&#x65B9;&#x6CD5;&#x70BA;&#x4F8B;&#xFF0C;&#x5B83;&#x9580;&#x901A;&#x5E38;&#x4E0D;&#x56DE;&#x50B3;&#x4EFB;&#x4F55;&#x7269;&#x4EF6;&#x3002;&#x5982;&#x679C;&#x8B93;&#x9019;&#x985E;&#x65B9;&#x6CD5;&#x4EE5;&#x56DE;&#x50B3;thsi &#x4EE3;&#x66FF; undefined &#xFF0C;&#x5373;&#x53EF;&#x958B;&#x555F; cascade &#x3002;<br>
cascade &#x53EF;&#x88FD;&#x9020;&#x975E;&#x5E38;&#x5BCC;&#x6709;&#x8868;&#x9054;&#x884C;&#x7684;&#x4ECB;&#x9762;&#xFF0C;&#x5B83;&#x6709;&#x52A9;&#x65BC;&#x63A7;&#x5236;&#x628A;&#x4ECB;&#x9762;&#x505A;&#x5F97;&#x4E00;&#x6B21;&#x505A;&#x592A;&#x591A;&#x4E8B;&#x7684;&#x50BE;&#x5411;&#x3002;</p>
<h2 id="4-14-curry">4-14 curry</h2>
<p>&#x85C9;&#x7531;&#x7D50;&#x5408;&#x51FD;&#x5F0F;&#x8207;&#x5F15;&#x6578;&#xFF0C;&#x800C;&#x7522;&#x751F;&#x65B0;&#x7684;&#x51FD;&#x5F0F;&#xFF1A;</p>
<pre><code class="lang-sh">  var add1 = add.curry(1);
  document.writeln(add1(6));  // 7
</code></pre>
<p>add1 &#x9019;&#x500B;&#x51FD;&#x5F0F;&#xFF0C;&#x662F;&#x7531;&#x50B3;&#x905E; 1 &#x7D66; add &#x7684; curry &#x65B9;&#x6CD5;&#x6240;&#x5EFA;&#x7ACB;&#x7684;&#xFF0C; add1 &#x51FD;&#x5F0F;&#x6703;&#x628A;&#x5B83;&#x7684;&#x5F15;&#x6578;&#x52A0; 1&#x3002;JavaScript &#x6C92;&#x6709; curry &#x65B9;&#x6CD5;&#xFF0C;&#x53EF;&#x85C9;&#x7531;&#x64F4;&#x5145;&#x5176;&#x65B9;&#x6CD5;&#x3002;</p>
<h2 id="4-15-memoization">4-15 Memoization</h2>
<p>&#x51FD;&#x5F0F;&#x80FD;&#x5229;&#x7528;&#x7269;&#x4EF6;&#x4EE5;&#x8A18;&#x61B6;&#x524D;&#x4E00;&#x6B21;&#x64CD;&#x4F5C;&#x7684;&#x7D50;&#x679C;&#xFF0C;&#x56E0;&#x6B21;&#x53EF;&#x4EE5;&#x907F;&#x514D;&#x4E0D;&#x4E0D;&#x8981;&#x7684;&#x5DE5;&#x4F5C;&#x3002;&#x9019;&#x7A2E;&#x6700;&#x4F73;&#x5316;&#x7A31;&#x70BA; memoization
&#x3002;JavaScript &#x7684;&#x7269;&#x4EF6;&#x8207;&#x9663;&#x5217;&#x90FD;&#x975E;&#x5E38;&#x5229;&#x65BC;&#x9019;&#x9805;&#x6700;&#x4F73;&#x5316;</p>
<pre><code class="lang-sh">  var fibonacci = <span class="pl-k">function</span>(n){
      <span class="pl-c1">return</span> n &lt; 2 ? n : fibonacci(n - 1) + fibonacci(n - 2);
      };

  <span class="pl-k">for</span> (var i = 0; i &lt;= 10; i+=1)
  {
    document.writeln(<span class="pl-s">&apos;&lt;br&gt; &apos;</span> + i +<span class="pl-s">&apos;:&apos;</span>+ fibonacci(i));
  }
  //0:0
  //1:1
  //2:1
  //3:2
  //4:3
  //5:5
  //6:8
  //7:13
  //8:21
  //9:34
  //10:55 
</code></pre>
<p>&#x4E0A;&#x4F8B;&#xFF0C;&#x6709;&#x5F88;&#x591A;&#x4E0D;&#x5FC5;&#x8981;&#x7684;&#x5DE5;&#x4F5C;&#x3002;fibonacci &#x51FD;&#x5F0F;&#x88AB;&#x547C;&#x53EB;&#x4E86; 453 &#x6B21;&#x3002;&#x6211;&#x5011;&#x547C;&#x53EB;&#x5B83;11&#x6B21;&#xFF0C;&#x5B83;&#x81EA;&#x6211;&#x547C;&#x53EB;&#x4E86; 442 &#x6B21;&#xFF0C;&#x4EE5;&#x8A08;&#x7B97;&#x76EE;&#x524D;&#x6216;&#x8A31;&#x5DF2;&#x7D93;&#x8A08;&#x7B97;&#x904E;&#x5F97;&#x503C;&#x3002;&#x5982;&#x679C;&#x4F7F;&#x7528; memoize &#x9019;&#x500B;&#x51FD;&#x5F0F;&#xFF0C;&#x5373;&#x53EF;&#x964D;&#x4F4E;&#x8CA0;&#x8377;&#x91CF;&#x3002;</p>
<p>&#x6211;&#x5011;&#x628A; momoized &#x7684;&#x7D50;&#x679C;&#x4FDD;&#x5B58;&#x5728; memo &#x7684;&#x9663;&#x5217;&#x4E2D;&#xFF0C;&#x9019;&#x500B;&#x9663;&#x5217;&#x5247;&#x53EF;&#x96B1;&#x85CF;&#x5728; closure &#x4E2D;&#x3002;&#x7576;&#x6211;&#x5011;&#x7684;&#x51FD;&#x5F0F;&#x88AB;&#x547C;&#x53EB;&#x6642;&#xFF0C;&#x9996;&#x5148;&#x5C0B;&#x627E;&#x662F;&#x5426;&#x5DF2;&#x77E5;&#x7D50;&#x679C;&#xFF0C;&#x5982;&#x679C;&#x662F;&#xFF0C;&#x53CA;&#x56DE;&#x50B3;&#x3002;</p>
<pre><code class="lang-sh"> var fibonacci = <span class="hljs-function"><span class="pl-ent">function</span></span>(){
     var memo = [0,1];
     var fib = <span class="pl-k">function</span>(n){
         var result = memo[n];
         <span class="pl-k">if</span>(typeof result !== <span class="pl-s">&apos;number&apos;</span>){
            result = fib(n - 1) + fib(n - 2);
            memo[n] = result;
         }
         <span class="pl-c1">return</span> result;
     };
   <span class="pl-c1">return</span> fib;
 }();
</code></pre>
<p>&#x56DE;&#x50B3;&#x7D50;&#x679C;&#x76F8;&#x540C;&#xFF0C;&#x4F46;&#x5B83;&#x73FE;&#x5728;&#x53EA;&#x88AB;&#x547C;&#x53EB; 29 &#x6B21;&#x3002;&#x6211;&#x5011;&#x547C;&#x53EB;&#x4E86; 11 &#x6B21;&#xFF0C;&#x51FD;&#x5F0F;&#x81EA;&#x6211;&#x547C;&#x53EB;&#x4E86; 18 &#x6B21;&#x3002;</p>
<p>&#x85C9;&#x7531;&#x88FD;&#x4F5C;&#x51FD;&#x5F0F;&#xFF0C;&#x4EE5;&#x5354;&#x52A9;&#x88FD;&#x9020; memoized &#x51FD;&#x5F0F;&#xFF0C;&#x6211;&#x5011;&#x53EF;&#x4EE5;&#x628A;&#x9019;&#x9805;&#x5DE5;&#x4F5C;&#x901A;&#x7528;&#x5316;&#x3002;memoizer &#x51FD;&#x5F0F;&#x5C07;&#x63A5;&#x53D7;&#x521D;&#x59CB;&#x7684; meno &#x9663;&#x5217;&#x53CA; fundamental &#x51FD;&#x5F0F;&#x3002;&#x5B83;&#x56DE;&#x50B3;&#x4E00;&#x500B;&#x7BA1;&#x7406; memo &#x5132;&#x5B58;&#x7684; shell &#x51FD;&#x5F0F;&#xFF0C;&#x5B83;&#x65BC;&#x9700;&#x8981;&#x6642;&#x547C;&#x53EB; fundamental &#x51FD;&#x5F0F;&#xFF0C;&#x6211;&#x5011;&#x50B3;&#x9001; shell &#x51FD;&#x5F0F;&#x53CA;&#x5176;&#x53C3;&#x6578;&#x7D66; fundamental &#x51FD;&#x5F0F;&#x3002;</p>
<pre><code class="lang-sh">  var memoizer = <span class="pl-k">function</span> (memo,fundamental){
  var shell = <span class="pl-k">function</span> (n) {
      var result = memo[n];
      <span class="pl-k">if</span> (typeof result !== <span class="pl-s">&apos;number&apos;</span>){
          result = fundamental(shell,n);
          memo[n] = result;
      }  
      <span class="pl-c1">return</span> result;
     };
     <span class="pl-c1">return</span> shell;
  };
</code></pre>
<p>&#x6211;&#x5011;&#x73FE;&#x5728;&#x53EF;&#x4EE5;&#x5229;&#x7528; memoizer &#x5B9A;&#x7FA9; fibonacci &#x51FD;&#x5F0F;&#xFF0C;&#x53EA;&#x9700;&#x8981;&#x63D0;&#x4F9B;&#x521D;&#x59CB;&#x7684; memo &#x9663;&#x5217;&#x8207; fundamential &#x51FD;&#x5F0F;&#x3002;</p>
<pre><code class="lang-sh">  var fibonacci = memoizer([0,1],<span class="pl-k">function</span>(shell , n){
       <span class="pl-c1">return</span> shell(n -1) + shell(n - 2);
  });
</code></pre>

        </div>
        <div class="footer-nav">
          <div class="left"><a href="3-Object.html"><span class="title">第三章：物件</span></a></div>
          <div class="right"><a href="5-Inheritance.html"><span class="label">Next: </span><span class="title">第五章：繼承</span></a></div>
        </div>
      </div>
      <div class="menu toc-menu">
        <li class="menu-item -level-0 -parent">
          <ul class="submenu">
            <li class="menu-item -level-1"><a href="index.html" class="link title  link-index">JavaScript:優良部分 讀書紀錄</a>
            </li>
            <li class="menu-item -level-1"><a href="1-Good-Parts.html" class="link title  link-1-good-parts">第一章：優良部分</a>
            </li>
            <li class="menu-item -level-1"><a href="2-Grammar.html" class="link title  link-2-grammar">第二章：文法</a>
            </li>
            <li class="menu-item -level-1"><a href="3-Object.html" class="link title  link-3-object">第三章：物件</a>
            </li>
            <li class="menu-item -level-1"><a href="4-Function.html" class="link title -active link-4-function">第四章：函式</a>
            </li>
            <li class="menu-item -level-1"><a href="#4-1" class="link title link-4-1">4-1 函式物件</a>
            </li>
            <li class="menu-item -level-1"><a href="#4-2" class="link title link-4-2">4-2 函式實字</a>
            </li>
            <li class="menu-item -level-1"><a href="#4-3" class="link title link-4-3">4-3 呼叫</a>
            </li>
            <li class="menu-item -level-1"><a href="#4-4-arguments" class="link title link-4-4-arguments">4-4 arguments 陣列</a>
            </li>
            <li class="menu-item -level-1"><a href="#4-5" class="link title link-4-5">4-5 回傳</a>
            </li>
            <li class="menu-item -level-1"><a href="#4-6" class="link title link-4-6">4-6 例外狀況</a>
            </li>
            <li class="menu-item -level-1"><a href="#4-7" class="link title link-4-7">4-7 擴充型別</a>
            </li>
            <li class="menu-item -level-1"><a href="#4-8" class="link title link-4-8">4-8 遞迴</a>
            </li>
            <li class="menu-item -level-1"><a href="#4-9" class="link title link-4-9">4-9 範圍</a>
            </li>
            <li class="menu-item -level-1"><a href="#4-10-closure" class="link title link-4-10-closure">4-10 closure</a>
            </li>
            <li class="menu-item -level-1"><a href="#4-11" class="link title link-4-11">4-11 回呼</a>
            </li>
            <li class="menu-item -level-1"><a href="#4-12" class="link title link-4-12">4-12 模組</a>
            </li>
            <li class="menu-item -level-1"><a href="#4-13-cascade" class="link title link-4-13-cascade">4-13 cascade</a>
            </li>
            <li class="menu-item -level-1"><a href="#4-14-curry" class="link title link-4-14-curry">4-14 curry</a>
            </li>
            <li class="menu-item -level-1"><a href="#4-15-memoization" class="link title link-4-15-memoization">4-15 Memoization</a>
            </li>
            <li class="menu-item -level-1"><a href="5-Inheritance.html" class="link title  link-5-inheritance">第五章：繼承</a>
            </li>
            <li class="menu-item -level-1"><a href="6-Array.html" class="link title  link-6-array">第六章：陣列</a>
            </li>
            <li class="menu-item -level-1"><a href="helpers.html" class="link title  link-helpers">第七章：正規運算式</a>
            </li>
            <li class="menu-item -level-1"><a href="1-Good-Parts.html" class="link title  link-1-good-parts-2">第八章：方法</a>
            </li>
            <li class="menu-item -level-1"><a href="1-Good-Parts.html" class="link title  link-1-good-parts-3">第九章：風格</a>
            </li>
            <li class="menu-item -level-1"><a href="1-Good-Parts.html" class="link title  link-1-good-parts-4">第十章：美的功能</a>
            </li>
            <li class="menu-item -level-1"><a href="1-Good-Parts.html" class="link title  link-1-good-parts-5">附錄</a>
            </li>
          </ul>
        </li>
      </div>
    </div>
  </body>
</html>